# Возможные варианты управления будущими тратами

Во многих случаях необходимо выделять определённые средства для дальнейших трат, и обеспечивать их размеры — не слишком большие и не слишком малые. Например, нужно, чтобы на текущих счетах всегда оставались средства, достаточные для выполнения коммунальных платежей. В более сложных случаях необходимо резервирование и на другие цели. Рассмотрим варианты реализации такого резервирования средствами YaLedger.

## Резервы счетов

YaLedger поддерживает открытие [резервов][Holds] на каждом счету. Этого может быть достаточно для регулярного резервирования средств под связанные задачи. Пример:

Каждый месяц, 21-го числа, открывать резерв на сумму 5000р для использования на коммунальные платежи:

    @ 2013/01/21
    periodic коммунальные_резервы = every 1 month do
      hold dr карточка 5000р

Каждый месяц, 20-го числа закрывать резерв предыдущего месяца:

    @ 2013/01/20
    periodic закрытие_резервов = every 1 month do
      close <= dr карточка 5000р

При этом коммунальные платежи выполняются проводками вида:

    @ 2013/01/25
    use cr расходы/коммунальные/квартплата 3500р
    карточка

Слово use в описании полупроводки указывает, что должна быть использована часть зарезервированных средств.

## Бюджетирование

YaLedger позволяет осуществлять бюджетирование — планирование доходов и расходов. Для реализации бюджетирования необходимо определить отдельную группу бюджетных счетов. Эти счета должны быть свободными. Для контроля выполнения планов можно использовать средства [проверки балансов счетов][BalanceChecks]:

    group бюджет {
      group доходы {
        account зарплата;
        account сдача_квартиры_в_аренду;
      };
      group расходы {
        account коммунальные {
          -- Выдавать ошибку при перерасходе средств на коммунальные платежи
          error = 0;
        };
        account продукты;
        account оборудование {
          -- Выдавать предупреждение при перерасходе средств на оборудование
          warning = 0;
        };
      };
    };

Каждый год или месяц выполняются проводки, перечисляющие средства со счетов доходов бюджета на счета расходов бюджета. Эти проводки и определяют суммы бюджета:

    @ 2013/01/02
    periodic зарплата_коммунальные = every 1 month do
      dr бюджет/доходы/зарплата 5000р
      бюджет/расходы/коммунальные

    @ 2013/01/02
    periodic зарплата_продукты = every 1 month do
      dr бюджет/доходы/зарплата 11000h
      бюджет/расходы/продукты

Если бюджетные суммы не должны переноситься на следующий период, то их можно списывать на отдельные счета:

    @ 2013/01/01
    periodic перенос_коммунальные = every 1 month do
      reconciliate бюджет/расходы/коммунальные 0р with активы/остатки/коммунальные

При реальном поступлении доходов они зачисляются на счета доходов бюджета:

    @ 2013/01/20
    cr бюджет/доходы/зарплата 25700р
    доходы/зарплата

При осуществлении расходов они списываются со счетов расходов бюджета:

    @ 2013/01/21
    cr расходы/коммунальные/квартплата 3500р
    бюджет/расходы/коммунальные

Для того, чтобы не писать каждый раз корреспондирующие счета, можно использовать [автоматический поиск корреспондирующего счёта][Correspondence] и [карту счетов][AccountsMap].

[AccountsMap]: AccountsMap.md
[BalanceChecks]: BalanceChecks.md
[Correspondence]: Correspondence.md
[Holds]: Holds.md
