# Возможные варианты учёта транзакций по банковским картам с
использованием банковских выписок по карте

Во многих случаях домашняя бухгалтерия включает один или несколько
банковских счетов или платёжных карт. Часто проводки по платёжной карте
образуют большинство проводок. При этом, банк обычно предоставляет
какие-нибудь средства для контроля за состоянием счетов — например,
выписки по карте в «телебанке». Как YaLedger может помочь отслеживать
средства на картах/счетах?

В принципе, возможны следующие варианты:

-   Использовать только средства, предоставляемые банком (телебанк).
    Некоторые банки предоставляют довольно удобные «телебанки».
    Преимущество — не надо никаких дополнительных программных средств.
    Недостаток: этот вариант эффективен только если у вас одна карта
    (или несколько карт одного банка), причём проводки по ней составляют
    подавляющее большинство всех проводок. Если же у вас несколько карт
    разных банков, или кроме проводок по картам есть достаточно много
    проводок с использованием наличных — то отдельную проблему будет
    представлять сведение данных по разным картам и по наличности
    воедино.
-   Использовать для всей (как наличной, так и безналичной) бухгалтерии
    одно программное средство — например, YaLedger; проводки по картам
    вводить вручную — из чеков или по памяти. Преимущество: все данные в
    одном месте. Недостаток: нужно вводить часть данных вручную. Ещё
    один недостаток: часть проводок можно забыть ввести, или забыть
    точную сумму, или потерять чек — тогда данные в вашей бухгалтерии
    разойдутся с реальностью.
-   Использовать для всей (как наличной, так и безналичной) бухгалтерии
    YaLedger; проводки по картам вводить, используя возможность YaLedger
    читать файлы CSV или HTML — из выписок, создаваемых телебанком.
    Преимущество: все данные в одном месте. Проводки по картам вручную
    вводить не надо. Остаётся один недостаток, который, вообще-то,
    присущ всем вариантам: данные в телебанке могут содержать лишние
    проводки. Сюда относятся случаи, когда кассир дважды провёл картой в
    POS-терминале, а банковская система почему-то этого не отследила
    сама; сюда же относятся все виды мошеннических транзакций
    (инициированных не вами).
-   Использовать для всей (как наличной, так и безналичной) бухгалтерии
    YaLedger; проводки по картам вводить вручную, а время от времени
    (например, раз в неделю или месяц) загружать данные из выписок
    телебанка. Средства [обработки дублирующихся
    транзакций][Deduplication] YaLedger позволяют реализовать практически любой
    вариант сверки.

Рассмотрим несколько вариантов сверки проводок по картам, введённых
вручную, с данными из телебанка:

-   Классический вариант: использование транзитного счёта. При вводе
    проводок вручную указываем только одну полупроводку. Корреспонденцию
    счетов настраиваем так, чтобы при этом вторая полупроводка проходила
    по счёту «транзит». Импорт данных из CSV настраиваем так, чтобы
    транзакции переводили суммы со счёта «карточка» на счёт «транзит».
    Остаётся только время от времени (например, после каждого импорта
    выписки) проверять, что баланс на счету «транзит» равен нулю.
    Ненулевой баланс на транзитном счету означает либо что подтверждение
    операции из телебанка ещё не было импортировано, либо что по в банке
    произошла лишняя транзакция.
-   Использование отдельных счетов для неподтверждённых проводок. Импорт
    выписок настраиваем так, чтобы дублирующая транзакция из выписки
    игнорировалась, но старой транзакции (введённой вручную)
    устанавливался атрибут «cleared=“yes”». Корреспонденцию счетов
    настраиваем так, чтобы для проводок по карте, не имеющих такого
    атрибута, использовались не реальные счета расходов, а специальные
    счета для отображения неподтверждённых сумм (это может быть один
    счёт для всех видов расходов, или это может быть набор счетов).
    Таким образом, на счетах неутверждённых сумм будут отображены только
    проводки, которых нет в телебанке. Импорт выписок можно настроить
    так, чтобы транзакции, которые не оказались проигнорированы (т.е.
    которые не дублируют предыдущих транзакций) вызывали ошибку:
    например, пусть эти транзакции дебетуют счёт, на котором всегда 0 и
    для которого установлена опция «error = 0». Тогда
    ошибочные/мошеннические транзакции будут неизбежно обнаружены.

[Deduplication]: Deduplication.md
