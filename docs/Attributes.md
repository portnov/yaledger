# Атрибуты

YaLedger поддерживает задание произвольных атрибутов для:

-   Счетов и групп счетов.
-   Транзакций. Атрибуты транзакции автоматически копируются в
    порождённые ею проводки и полупроводки.

Атрибуты используются для:

-   Записи дополнительной структурированной информации о счетах, группах
    счетов, транзакциях.
-   Поиска корреспондирующего счёта для проводки.

Атрибуты задаются в виде `{name = value; ...}`. Значения атрибутов могут
задаваться следующим образом:

-   “value” (в двойных кавычках). Значение равно заданной строке. При
    проверке на соответствие — ищется совпадение строки.
-   !“value”. Значение равно чему угодно, но не заданной строке.
-   ?“value”. Значение равно заданной строке, но необязательно. Такие
    атрибуты используются только для уточнения при поиске
    корреспондирующего счёта (см. ниже).
-   \* (звёздочка). Значение задано, но равно чему угодно.
-   [“value1”, “value2”]. Значение равно одной из заданных строк.
-   /regex/. Значение подходит под заданное регулярное выражение.
    Используются PCRE.

При поиске корреспондирующего счёта ищется счёт, атрибуты которого
соответствуют атрибутам проводки. При этом сначала необязательные
атрибуты (значения которых заданы в виде ?“value”) игнорируются. Если
находится несколько счетов, то среди них ищутся совпадения
необязательных атрибутов. Ищутся счета с наибольшим количеством
соответствующих необязательных атрибутов.

Некоторые атрибуты транзакций определяются автоматически:

-   category — категория транзакции (строка в скобках после даты, если
    указана). Для полупроводок курсовой разницы равно
    “rates-difference”. Для проводок [согласования баланса][Reconciliation] равно “reconciliation”.
-   description — описание транзакции (строка после даты и категории).
    Необязательный атрибут.
-   source — имя первого счёта, упомянутого в транзакции. Необязательный
    атрибут.
-   rule. Задано для транзакций, порождённых [правилами][Rules]. Равно
    имени правила.
-   periodic. Задано для транзакций, порождённых записями о
    [периодических транзакциях][Periodic]. Равно имени записи.
-   redirectedFrom. Задано для полупроводок, порождённых
    [автоматическим перенаправлением дебета][DebitRedirect]. Равно
    имени счёта, с которого выполнено перенаправление.

[DebitRedirect]: DebitRedirect.md
[Periodic]: Periodic.md
[Reconciliation]: Reconciliation.md
[Rules]: Rules.md
